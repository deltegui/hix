<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>HIX</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="wasm_exec.js"></script>
    <script src="pako.min.js"></script>
</head>
<body>
    <div class="container" id="wasm_mount_point">
        <!-- Go WASM content -->
    </div>
    <script type="text/javascript">
        const go = new Go();

        if (!WebAssembly.instantiateStreaming) {
            WebAssembly.instantiateStreaming = async (resp, importObject) => {
                const source = await resp.then(r => r.arrayBuffer());
                return await WebAssembly.instantiate(source, importObject);
            };
        }

        fetch('main.wasm.br')
            .then(res => res.arrayBuffer())
            .then(buffer => {
                const decompressed = pako.ungzip(new Uint8Array(buffer));
                return WebAssembly.instantiate(decompressed.buffer, go.importObject);
            })
            .then(result => go.run(result.instance))
            .catch(err => {
                console.error("Error loading WASM:", err);
            });
    </script>
</body>
</html>